@if (store?.profile()) {
   @let profile = store?.profile();
   @let devices = store?.devices();
   <div class="container mx-auto">
      <div class="mt-0 flex flex-wrap justify-between items-center space-y-5 md:space-y-0">
         <a (click)="goBack()" class="bg-gray-300 p-1 rounded-full cursor-pointer">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
               stroke="currentColor" class="size-6">
               <path stroke-linecap="round" stroke-linejoin="round" d="M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18" />
            </svg>
         </a>
         <h3 class="text-xl font-bold text-blue-500 rounded-md px-2"><span class="text-black">Welcome back,
            </span>{{profile.firstName}}!
         </h3>
      </div>
      <div class="mx-auto mt-3 mb-3 border-t border-gray-200"></div>
   </div>
   <div class="container mx-auto">
      <div class="grid grid-cols-1 xl:grid-cols-3 lg:grid-cols-3 gap-4">
         <aside class="rounded-xl h-fit lg:sticky lg:top-[135ipx]">
            <div class="rounded-xl">
               <div class="bg-white rounded-lg p-4 border border-solid border-gray-200">
                  <div class="flex flex-row items-center justify-between gap-4 flex-wrap">
                     <div class="flex flex-row items-center justify-between gap-4">
                        <img [src]="profile.imageUrl" [alt]="profile.firstName + ' ' + profile.lastName" class="object-cover w-20 h-20 aspect-square rounded-lg" width="5rem" height="5rem" loading="lazy">
                        <div class="flex flex-row items-center justify-between">
                           <div>
                              <p class="text-xl font-bold">{{profile.firstName}} {{profile.lastName}}</p>
                              <p class="text-sm text-gray-500 font-normal">{{profile.email}}</p>
                           </div>
                        </div>
                     </div>
                     <p class="font-semibold text-xs text-gray-200 py-0.5 px-0.5 bg-green-600 w-max rounded-md">
                        {{profile.role}}
                     </p>
                  </div>
                  <div class="border border-solid border-gray-200 mt-1 mb-1"></div>
                  <div class="flex flex-row items-center justify-between">
                     <p class="font-semibold text-sm text-gray-500">Member ID</p>
                     <p class="text-sm text-gray-500 font-normal">{{profile.memberId}}</p>
                  </div>
                  <div class="flex flex-row items-center justify-between">
                     <p class="font-semibold text-sm text-gray-500">Phone</p>
                     <p class="text-sm text-gray-500 font-normal">{{profile.phone}}</p>
                  </div>
                  <div class="flex flex-row items-center justify-between">
                     <p class="font-semibold text-sm text-gray-500">Last Login</p>
                     <p class="text-sm text-gray-500 font-normal">{{profile.lastLogin | date: 'medium'}}</p>
                  </div>
                  <div class="mt-3 space-x-1">
                     @if (profile.enabled) {
                     <span class="py-1 px-1.5 inline-flex items-center gap-x-1 text-xs font-medium bg-teal-100 text-teal-800 rounded-full">
                        <svg class="size-2.5" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                           <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z"/>
                        </svg>
                         Enabled
                     </span>
                     } @else {
                     <span class="py-1 px-1.5 inline-flex items-center gap-x-1 text-xs font-medium bg-red-100 text-red-800 rounded-full">
                        <svg class="size-2.5" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                           <path d="M8.982 1.566a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566zM8 5c.535 0 .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995A.905.905 0 0 1 8 5zm.002 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2z"/>
                        </svg>
                         Disabled
                     </span>
                     } 
                  </div>
                </div>
            </div>
            <div class="hidden lg:block mt-4 p-4 rounded-lg bg-white border border-solid border-gray-200 overflow-auto">
               <h2 class="text-lg pb-2 font-semibold text-gray-800 border-b border-solid border-gray-200">
                  Recent Devices
                  <pre>{{ device | json }}</pre>

               </h2>
               <div class="mt-4">
                  @for (device of devices | slice: 0 : 3; track device.deviceId) {
                     <div class="p-3 mb-2.5 border border-gray-100 rounded-md items-center gap-2 px-2 bg-gray-100">
                        <div class="flex flex-col items-start justify-between gap-2 transition-all duration-500">
                                <div class="flex items-center gap-2">
                                    <img src="https://cdn-icons-png.flaticon.com/512/548/548344.png" width="50" [alt]="device.device" class="rounded-md">
                                    <div>
                                        <p class="font-normal text-md text-gray-900">{{device.device}}</p>
                                        <p class="font-normal text-sm text-gray-500">{{device.client}}</p>
                                    </div>
                                </div>
                            <div class="text-sm font-medium text-gray-900">IP Address: {{device.ipAddress}}</div>
                            <div class="text-sm font-medium text-gray-900">Date: {{device.createdAt | date: 'medium'}}</div>
                        </div>
                     </div>
                    }
                </div>
               <p class="mt-4 text-sm text-gray-500">
                  Detect unauthorized access, suspicious login from unusual IP address and devices designed to build trust and transparency.
               </p>
            </div>
         </aside>
         <main class="xl:col-span-2 lg:col-span-2 w-full">
            <div class="p-4 mb-10 rounded-lg bg-white border border-solid border-gray-200 overflow-auto">
               <div class="flex flex-row items-center justify-between">
                  <div class="flex flex-col items-center justify-start gap-3 sm:flex-row">
                     <h2 class="text-lg pb-2 font-semibold text-gray-800">
                        Profile
                     </h2>
                  </div>
                  @if(mode() === 'view') {
                  <button (click)="switchMode()" class="text-blue-700 border border-solid border-gray-200 overflow-auto hover:bg-gray-200 font-medium rounded-lg text-sm p-2">
                     <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-5">
                        <path stroke-linecap="round" stroke-linejoin="round" d="m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10" />
                     </svg>
                  </button>
                  }
               </div>
               <div class="border-t border-solid border-gray-200 mt-3 w-full"></div>
               <div class="flex items-center gap-4 mt-4">
                  <img [src]="profile.imageUrl" [alt]="profile.firstName + ' ' + profile.lastName" class="object-cover size-24 rounded-full ring-4 ring-gray-300" loading="lazy">      
                  <button (click)="fileInput.click()" type="button" class="py-2 px-3 inline-flex items-center gap-x-2 text-sm font-medium rounded-lg border border-gray-200 bg-white text-gray-800 shadow-sm hover:bg-gray-50 focus:outline-none focus:bg-gray-50 disabled:opacity-50 disabled:pointer-events-none">
                     <svg class="shrink-0 size-4" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                        <polyline points="17 8 12 3 7 8"/>
                        <line x1="12" x2="12" y1="3" y2="15"/>
                     </svg>
                     Upload Photo
                  </button>
               </div>
               <div class="items-center text-[#202142]">
                  <form #userForm="ngForm" (ngSubmit)="updateUser(userForm)" class="flex flex-col gap-4 pt-4">
                  <div class="flex flex-col md:flex-row items-start gap-3">
                     <div class="block w-full md:w-1/2">
                        <label for="countries" class="mb-2 text-sm font-medium text-gray-600 w-full flex items-center">
                           First Name
                           <svg width="7" height="7" class="ml-1" viewBox="0 0 7 7" fill="none" xmlns="http://www.w3.org/2000/svg">
                              <path d="M3.11222 6.04545L3.20668 3.94744L1.43679 5.08594L0.894886 4.14134L2.77415 3.18182L0.894886 2.2223L1.43679 1.2777L3.20668 2.41619L3.11222 0.318182H4.19105L4.09659 2.41619L5.86648 1.2777L6.40838 2.2223L4.52912 3.18182L6.40838 4.14134L5.86648 5.08594L4.09659 3.94744L4.19105 6.04545H3.11222Z" fill="#EF4444"></path>
                           </svg>
                        </label>
                        <input type="text" autocomplete="off" [ngModel]="profile.firstName" name="firstName" [disabled]="mode() === 'view'"
                        class=" disabled:bg-gray-100 disabled:border-none block w-full px-3 py-1.5 pr-8 text-sm font-normal shadow-xs text-gray-900 bg-transparent border border-gray-300 rounded-lg placeholder-gray-400 focus:outline-none leading-relaxed"
                        placeholder="First Name" required>
                     </div>
                     <div class="block w-full md:w-1/2">
                        <label for="countries" class="flex items-center mb-2 text-sm font-medium text-gray-600 w-full">
                           Last Name
                           <svg width="7" height="7" class="ml-1" viewBox="0 0 7 7" fill="none"
                              xmlns="http://www.w3.org/2000/svg">
                              <path
                                 d="M3.11222 6.04545L3.20668 3.94744L1.43679 5.08594L0.894886 4.14134L2.77415 3.18182L0.894886 2.2223L1.43679 1.2777L3.20668 2.41619L3.11222 0.318182H4.19105L4.09659 2.41619L5.86648 1.2777L6.40838 2.2223L4.52912 3.18182L6.40838 4.14134L5.86648 5.08594L4.09659 3.94744L4.19105 6.04545H3.11222Z"
                                 fill="#EF4444"></path>
                           </svg>
                        </label>
                        <input type="text" autocomplete="off" [ngModel]="profile.lastName"
                        name="lastName" [disabled]="mode() === 'view'"
                        class="disabled:bg-gray-100 disabled:border-none block w-full px-3 py-1.5 pr-8 text-sm font-normal shadow-xs text-gray-900 bg-transparent border border-gray-300 rounded-lg placeholder-gray-400 focus:outline-none leading-relaxed"
                        placeholder="Last Name" required>
                     </div>
                  </div>
                  <div class="">
                     <label class="flex items-center mb-2 text-gray-600 text-sm font-medium">
                        Email
                        <svg width="7" height="7" class="ml-1" viewBox="0 0 7 7" fill="none"
                           xmlns="http://www.w3.org/2000/svg">
                           <path
                              d="M3.11222 6.04545L3.20668 3.94744L1.43679 5.08594L0.894886 4.14134L2.77415 3.18182L0.894886 2.2223L1.43679 1.2777L3.20668 2.41619L3.11222 0.318182H4.19105L4.09659 2.41619L5.86648 1.2777L6.40838 2.2223L4.52912 3.18182L6.40838 4.14134L5.86648 5.08594L4.09659 3.94744L4.19105 6.04545H3.11222Z"
                              fill="#EF4444"></path>
                        </svg>
                     </label>
                     <input type="text" autocomplete="off" [ngModel]="profile.email" name="email"
                     [disabled]="mode() === 'view'"
                     class="disabled:bg-gray-100 disabled:border-none block w-full px-3 py-1.5 pr-8 text-sm font-normal shadow-xs text-gray-900 bg-transparent border border-gray-300 rounded-lg placeholder-gray-400 focus:outline-none leading-relaxed"
                     placeholder="Ex: I cannot log into my account" required>
                  </div>
                  <div class="">
                     <label class="flex items-center mb-2 text-gray-600 text-sm font-medium">
                     Address
                     </label>
                     <input type="text" autocomplete="off" [ngModel]="profile.address" name="address"
                     [disabled]="mode() === 'view'"
                     class="disabled:bg-gray-100 disabled:border-none block w-full px-3 py-1.5 pr-8 text-sm font-normal shadow-xs text-gray-900 bg-transparent border border-gray-300 rounded-lg placeholder-gray-400 focus:outline-none leading-relaxed"
                     placeholder="Ex: I cannot log into my account" required>
                  </div>
                  <div class="relative">
                     <label class="flex  items-center mb-2 text-gray-600 text-sm font-medium" for="bio">
                        Bio
                        <svg width="7" height="7" class="ml-1" viewBox="0 0 7 7" fill="none"
                           xmlns="http://www.w3.org/2000/svg">
                           <path
                              d="M3.11222 6.04545L3.20668 3.94744L1.43679 5.08594L0.894886 4.14134L2.77415 3.18182L0.894886 2.2223L1.43679 1.2777L3.20668 2.41619L3.11222 0.318182H4.19105L4.09659 2.41619L5.86648 1.2777L6.40838 2.2223L4.52912 3.18182L6.40838 4.14134L5.86648 5.08594L4.09659 3.94744L4.19105 6.04545H3.11222Z"
                              fill="#EF4444"></path>
                        </svg>
                     </label>
                     <textarea [ngModel]="profile.bio" name="bio" [disabled]="mode() === 'view'"
                     id="bio" placeholder="Ex: I like cooking and playing video games" cols="" rows=""
                     class="disabled:bg-gray-100 disabled:border-none p-2 text-sm font-normal shadow-xs text-gray-900 placeholder-gray-400 rounded-lg border border-gray-300 w-full h-20"
                     required=""></textarea>
                  </div>
                  <div class="relative w-full">
                     <label for="countries" class="flex items-center mb-2 text-sm font-medium text-gray-600 w-full">
                        Phone
                        <svg width="7" height="7" class="ml-1" viewBox="0 0 7 7" fill="none"
                           xmlns="http://www.w3.org/2000/svg">
                           <path
                              d="M3.11222 6.04545L3.20668 3.94744L1.43679 5.08594L0.894886 4.14134L2.77415 3.18182L0.894886 2.2223L1.43679 1.2777L3.20668 2.41619L3.11222 0.318182H4.19105L4.09659 2.41619L5.86648 1.2777L6.40838 2.2223L4.52912 3.18182L6.40838 4.14134L5.86648 5.08594L4.09659 3.94744L4.19105 6.04545H3.11222Z"
                              fill="#EF4444"></path>
                        </svg>
                     </label>
                     <input type="text" autocomplete="off" [ngModel]="profile.phone" name="phone"
                     [disabled]="mode() === 'view'"
                     class="disabled:bg-gray-100 disabled:border-none block w-full px-3 py-1.5 pr-8 text-sm font-normal shadow-xs text-gray-900 bg-transparent border border-gray-300 rounded-lg placeholder-gray-400 focus:outline-none leading-relaxed"
                     placeholder="Ex: 1234567890" required>
                  </div>
                  <div class="flex flex-col md:flex-row items-start gap-3">
                     <div class="block w-full md:w-1/2">
                        <label for="countries" class="mb-2 text-sm font-medium text-gray-600 w-full flex items-center">
                        Created on
                        </label>
                        <input type="text" autocomplete="off"
                        [ngModel]="profile.createdAt | date: 'medium'" name="createdAt"
                        [disabled]="true"
                        class="disabled:bg-gray-100 disabled:border-none block w-full px-3 py-1.5 text-sm font-normal shadow-xs text-gray-900 bg-transparent border border-gray-300 rounded-lg placeholder-gray-400 focus:outline-none leading-relaxed"
                        required>
                     </div>
                     <div class="block w-full md:w-1/2">
                        <label for="countries" class="mb-2 text-sm font-medium text-gray-600 w-full flex items-center">
                        Updated on
                        </label>
                        <input type="text" autocomplete="off"
                        [ngModel]="profile.updatedAt | date: 'medium'" name="updatedAt"
                        [disabled]="true"
                        class="disabled:bg-gray-100 disabled:border-none block w-full px-3 py-1.5 text-sm font-normal shadow-xs text-gray-900 bg-transparent border border-gray-300 rounded-lg placeholder-gray-400 focus:outline-none leading-relaxed"
                        required>
                     </div>
                  </div>
                  <div class="flex flex-col md:flex-row items-start gap-3">
                     <div class="block w-full md:w-1/2">
                        <label for="countries" class="mb-2 text-sm font-medium text-gray-600 w-full flex items-center">
                           Member ID
                           <svg width="7" height="7" class="ml-1" viewBox="0 0 7 7" fill="none"
                              xmlns="http://www.w3.org/2000/svg">
                              <path
                                 d="M3.11222 6.04545L3.20668 3.94744L1.43679 5.08594L0.894886 4.14134L2.77415 3.18182L0.894886 2.2223L1.43679 1.2777L3.20668 2.41619L3.11222 0.318182H4.19105L4.09659 2.41619L5.86648 1.2777L6.40838 2.2223L4.52912 3.18182L6.40838 4.14134L5.86648 5.08594L4.09659 3.94744L4.19105 6.04545H3.11222Z"
                                 fill="#EF4444"></path>
                           </svg>
                        </label>
                        <input type="text" autocomplete="off" [ngModel]="profile.memberId" name="memberId"
                        [disabled]="true"
                        class=" disabled:bg-gray-100 disabled:border-none block w-full px-3 py-1.5 pr-8 text-sm font-normal shadow-xs text-gray-900 bg-transparent border border-gray-300 rounded-lg placeholder-gray-400 focus:outline-none leading-relaxed"
                        placeholder="First Name" required>
                     </div>
                     <div class="block w-full md:w-1/2">
                        <label for="countries" class="flex items-center mb-2 text-sm font-medium text-gray-600 w-full">
                           Last Login
                           <svg width="7" height="7" class="ml-1" viewBox="0 0 7 7" fill="none"
                              xmlns="http://www.w3.org/2000/svg">
                              <path
                                 d="M3.11222 6.04545L3.20668 3.94744L1.43679 5.08594L0.894886 4.14134L2.77415 3.18182L0.894886 2.2223L1.43679 1.2777L3.20668 2.41619L3.11222 0.318182H4.19105L4.09659 2.41619L5.86648 1.2777L6.40838 2.2223L4.52912 3.18182L6.40838 4.14134L5.86648 5.08594L4.09659 3.94744L4.19105 6.04545H3.11222Z"
                                 fill="#EF4444"></path>
                           </svg>
                        </label>
                        <input type="text" autocomplete="off" [ngModel]="profile.lastLogin | date: 'medium'" name="lastLogin"
                        [disabled]="true"
                        class="disabled:bg-gray-100 disabled:border-none block w-full px-3 py-1.5 pr-8 text-sm font-normal shadow-xs text-gray-900 bg-transparent border border-gray-300 rounded-lg placeholder-gray-400 focus:outline-none leading-relaxed"
                        placeholder="Last Name" required>
                     </div>
                  </div>
                  <div class="flex flex-row items-end justify-end gap-3">
                     @if(mode() === 'edit') {
                     <button (click)="switchMode()" type="button" class="text-white bg-yellow-400 hover:bg-yellow-500 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-md text-sm p-2">
                     Cancel
                     </button>
                     <button [disabled]="userForm.invalid" type="submit" class="disabled:bg-gray-300 text-white bg-blue-600 hover:bg-blue-700 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-md text-sm p-2">
                     Update Profile
                     </button>
                     }
                  </div>
                  </form>
               </div>
            </div>
            <div id="password" class="p-4 mb-10 rounded-lg bg-white border border-solid border-gray-200 overflow-auto">
               <h2 class="text-lg pb-2 font-semibold text-gray-800 border-b border-solid border-gray-200">
                  Password
               </h2>
               <div class="grid items-start lg:grid-cols-2 gap-10">
                  <div class="items-center">
                     <form #passwordForm="ngForm" (ngSubmit)="updatePassword(passwordForm)"
                     class="flex flex-col gap-4 pt-4">
                     <div class="">
                        <label class="flex items-center mb-2 text-gray-600 text-sm font-medium">
                           Current Password
                           <svg width="7" height="7" class="ml-1" viewBox="0 0 7 7" fill="none" xmlns="http://www.w3.org/2000/svg">
                              <path d="M3.11222 6.04545L3.20668 3.94744L1.43679 5.08594L0.894886 4.14134L2.77415 3.18182L0.894886 2.2223L1.43679 1.2777L3.20668 2.41619L3.11222 0.318182H4.19105L4.09659 2.41619L5.86648 1.2777L6.40838 2.2223L4.52912 3.18182L6.40838 4.14134L5.86648 5.08594L4.09659 3.94744L4.19105 6.04545H3.11222Z" fill="#EF4444"></path>
                           </svg>
                        </label>
                        <input type="password" ngModel name="currentPassword"
                           class="disabled:bg-gray-100 disabled:border-none block w-full px-3 py-1.5 pr-8 text-sm font-normal shadow-xs text-gray-900 bg-transparent border border-gray-300 rounded-lg placeholder-gray-400 focus:outline-none leading-relaxed"
                           placeholder="Current password" autocomplete="off" required>
                     </div>
                     <div class="">
                        <label class="flex items-center mb-2 text-gray-600 text-sm font-medium">
                           New Password
                           <svg width="7" height="7" class="ml-1" viewBox="0 0 7 7" fill="none" xmlns="http://www.w3.org/2000/svg">
                              <path d="M3.11222 6.04545L3.20668 3.94744L1.43679 5.08594L0.894886 4.14134L2.77415 3.18182L0.894886 2.2223L1.43679 1.2777L3.20668 2.41619L3.11222 0.318182H4.19105L4.09659 2.41619L5.86648 1.2777L6.40838 2.2223L4.52912 3.18182L6.40838 4.14134L5.86648 5.08594L4.09659 3.94744L4.19105 6.04545H3.11222Z" fill="#EF4444"></path>
                           </svg>
                        </label>
                        <input type="password" ngModel name="newPassword" class="disabled:bg-gray-100 disabled:border-none block w-full px-3 py-1.5 pr-8 text-sm font-normal shadow-xs text-gray-900 bg-transparent border border-gray-300 rounded-lg placeholder-gray-400 focus:outline-none leading-relaxed"
                           placeholder="New password" autocomplete="off" required>
                     </div>
                     <div class="">
                        <label class="flex items-center mb-2 text-gray-600 text-sm font-medium">
                           Confirm New Password
                           <svg width="7" height="7" class="ml-1" viewBox="0 0 7 7" fill="none" xmlns="http://www.w3.org/2000/svg">
                              <path d="M3.11222 6.04545L3.20668 3.94744L1.43679 5.08594L0.894886 4.14134L2.77415 3.18182L0.894886 2.2223L1.43679 1.2777L3.20668 2.41619L3.11222 0.318182H4.19105L4.09659 2.41619L5.86648 1.2777L6.40838 2.2223L4.52912 3.18182L6.40838 4.14134L5.86648 5.08594L4.09659 3.94744L4.19105 6.04545H3.11222Z" fill="#EF4444"></path>
                           </svg>
                        </label>
                        <input type="password" ngModel name="confirmNewPassword" class="disabled:bg-gray-100 disabled:border-none block w-full px-3 py-1.5 pr-8 text-sm font-normal shadow-xs text-gray-900 bg-transparent border border-gray-300 rounded-lg placeholder-gray-400 focus:outline-none leading-relaxed" placeholder="Confirm new password" autocomplete="off" required>
                     </div>
                     <div class="flex flex-row items-end justify-end">
                        <button [disabled]="passwordForm.invalid" type="submit"
                           class="disabled:bg-gray-300 text-white bg-blue-600 hover:bg-blue-700 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-md text-sm p-2">
                        Update Password
                        </button>
                     </div>
                     </form>
                  </div>
                  <div class="divide-y divide-gray-200">
                     <div class="flex gap-x-7 py-6">
                        <div class="grow">
                           <h3 class="font-semibold text-gray-800">Letters</h3>
                           <p class="mt-1 text-sm text-gray-500">
                              Use a number of letters (upper case and lower case)
                           </p>
                        </div>
                     </div>
                     <div class="flex gap-x-7 py-6">
                        <div class="grow">
                           <h3 class="font-semibold text-gray-800">Numbers</h3>
                           <p class="mt-1 text-sm text-gray-500">
                              Use numbers to enforce your password
                           </p>
                        </div>
                     </div>
                     <div class="flex gap-x-7 py-6">
                        <div class="grow">
                           <h3 class="font-semibold text-gray-800">Special Characters</h3>
                           <p class="mt-1 text-sm text-gray-500">
                              Use special characters to make it hard to break
                           </p>
                        </div>
                     </div>
                     <div class="flex gap-x-7 py-6">
                        <div class="grow">
                           <h3 class="font-semibold text-gray-800">Random</h3>
                           <p class="mt-1 text-sm text-gray-500">
                              The more random your password is the more secure it will be
                           </p>
                        </div>
                     </div>
                  </div>
               </div>
            </div>
            <div id="settings" class="p-4 mb-10 rounded-lg bg-white border border-solid border-gray-200 overflow-auto">
               <h2 class="text-lg mb-4 pb-2 font-semibold text-gray-800 border-b border-solid border-gray-200">
                  Settings
               </h2>
               <div class="border-b border-solid border-gray-200 pb-8 mb-4">
                  <h3 class="mb-1p text-lg font-medium text-gray-900">Account Locked</h3>
                  <ul class="grid w-full gap-6 md:grid-cols-2">
                     <li (click)="toggleSettings(Settings.LOCKED)" class="cursor-pointer">
                        <div class="inline-flex items-center justify-between w-full p-2.5 rounded-lg cursor-pointer"
                        [ngClass]="[profile.accountNonLocked ? 'border border-green-600 text-green-600 bg-green-100' : 'text-gray-500 bg-white border border-gray-200']">
                           <div class="block">
                              <div class="w-full text-lg font-semibold">Unlocked</div>
                              <div class="w-full">Your account is unlocked</div>
                           </div>
                           <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2.5" stroke="currentColor" class="size-6"><path stroke-linecap="round" stroke-linejoin="round" d="M13.5 10.5V6.75a4.5 4.5 0 1 1 9 0v3.75M3.75 21.75h10.5a2.25 2.25 0 0 0 2.25-2.25v-6.75a2.25 2.25 0 0 0-2.25-2.25H3.75a2.25 2.25 0 0 0-2.25 2.25v6.75a2.25 2.25 0 0 0 2.25 2.25Z" /></svg>
                        </div>
                     </li>
                     <li (click)="toggleSettings(Settings.LOCKED)" class="cursor-pointer">
                        <div class="inline-flex items-center justify-between w-full p-2.5 rounded-lg cursor-pointer"
                        [ngClass]="[!profile.accountNonLocked ? 'border border-red-600 text-red-600 bg-red-100' : 'text-gray-500 bg-white border border-gray-200']">
                           <div class="block">
                              <div class="w-full text-lg font-semibold">Locked</div>
                              <div class="w-full">Your account is locked</div>
                           </div>
                           <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2.5" stroke="currentColor" class="size-6"> <path stroke-linecap="round" stroke-linejoin="round" d="M16.5 10.5V6.75a4.5 4.5 0 1 0-9 0v3.75m-.75 11.25h10.5a2.25 2.25 0 0 0 2.25-2.25v-6.75a2.25 2.25 0 0 0-2.25-2.25H6.75a2.25 2.25 0 0 0-2.25 2.25v6.75a2.25 2.25 0 0 0 2.25 2.25Z" /> </svg>
                        </div>
                     </li>
                  </ul>
               </div>
               <div class="border-b border-solid border-gray-200 pb-8 mb-4">
                  <h3 class="mb-1p text-lg font-medium text-gray-900">Account Expired</h3>
                  <ul class="grid w-full gap-6 md:grid-cols-2">
                     <li (click)="toggleSettings(Settings.EXPIRED)" class="cursor-pointer">
                        <div class="inline-flex items-center justify-between w-full p-2.5 rounded-lg cursor-pointer"
                        [ngClass]="[profile.accountNonExpired ? 'border border-green-600 text-green-600 bg-green-100' : 'text-gray-500 bg-white border border-gray-200']">
                           <div class="block">
                              <div class="w-full text-lg font-semibold">Not Expired</div>
                              <div class="w-full">Your account is not expired</div>
                           </div>
                           <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-6"> <path stroke-linecap="round" stroke-linejoin="round" d="M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5m-9-6h.008v.008H12v-.008ZM12 15h.008v.008H12V15Zm0 2.25h.008v.008H12v-.008ZM9.75 15h.008v.008H9.75V15Zm0 2.25h.008v.008H9.75v-.008ZM7.5 15h.008v.008H7.5V15Zm0 2.25h.008v.008H7.5v-.008Zm6.75-4.5h.008v.008h-.008v-.008Zm0 2.25h.008v.008h-.008V15Zm0 2.25h.008v.008h-.008v-.008Zm2.25-4.5h.008v.008H16.5v-.008Zm0 2.25h.008v.008H16.5V15Z" /> </svg>
                        </div>
                     </li>
                     <li (click)="toggleSettings(Settings.EXPIRED)" class="cursor-pointer">
                        <div class="inline-flex items-center justify-between w-full p-2.5 rounded-lg cursor-pointer"
                        [ngClass]="[!profile.accountNonExpired ? 'border border-red-600 text-red-600 bg-red-100' : 'text-gray-500 bg-white border border-gray-200']">
                           <div class="block">
                              <div class="w-full text-lg font-semibold">Expired</div>
                              <div class="w-full">Your account is expired</div>
                           </div>
                           <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-6"> <path stroke-linecap="round" stroke-linejoin="round" d="M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5m-9-6h.008v.008H12v-.008ZM12 15h.008v.008H12V15Zm0 2.25h.008v.008H12v-.008ZM9.75 15h.008v.008H9.75V15Zm0 2.25h.008v.008H9.75v-.008ZM7.5 15h.008v.008H7.5V15Zm0 2.25h.008v.008H7.5v-.008Zm6.75-4.5h.008v.008h-.008v-.008Zm0 2.25h.008v.008h-.008V15Zm0 2.25h.008v.008h-.008v-.008Zm2.25-4.5h.008v.008H16.5v-.008Zm0 2.25h.008v.008H16.5V15Z" /> </svg>
                        </div>
                     </li>
                  </ul>
               </div>
               <div class="mb-3">
                  <h3 class="mb-1p text-lg font-medium text-gray-900">Account Disabled</h3>
                  <ul class="grid w-full gap-6 md:grid-cols-2">
                     <li (click)="toggleSettings(Settings.ENABLED)" class="cursor-pointer">
                        <div class="inline-flex items-center justify-between w-full p-2.5 rounded-lg cursor-pointer"
                        [ngClass]="[profile.enabled ? 'border border-green-600 text-green-600 bg-green-100' : 'text-gray-500 bg-white border border-gray-200']">
                           <div class="block">
                              <div class="w-full text-lg font-semibold">Enabled</div>
                              <div class="w-full">Your account is enabled</div>
                           </div>
                           <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-6"> <path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z" /> </svg>
                        </div>
                     </li>
                     <li (click)="toggleSettings(Settings.ENABLED)" class="cursor-pointer">
                        <div class="inline-flex items-center justify-between w-full p-2.5 rounded-lg cursor-pointer"
                        [ngClass]="[!profile.enabled ? 'border border-red-600 text-red-600 bg-red-100' : 'text-gray-500 bg-white border border-gray-200']">
                           <div class="block">
                              <div class="w-full text-lg font-semibold">Disabled</div>
                              <div class="w-full">Your account is disabled</div>
                           </div>
                           <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-6"> <path stroke-linecap="round" stroke-linejoin="round" d="m9.75 9.75 4.5 4.5m0-4.5-4.5 4.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z" /> </svg>
                        </div>
                     </li>
                  </ul>
               </div>
            </div>
            <div class="p-4 mb-10 rounded-lg bg-white border border-solid border-gray-200 overflow-auto">
               <h2 class="text-lg pb-2 font-semibold text-gray-800 border-b border-solid border-gray-200">
                  Two-Factor Authentication
                  <span [ngClass]="[profile.mfa ? 'text-green-600 border-green-900 bg-green-200' : 'text-red-600 bg-red-200 border-red-300']"
                     class="px-2 uppercase text-lg ml-2 font-bold p-1 rounded-md">
                  {{ profile.mfa ? 'Enabled' : 'Disabled' }}
                  </span>
               </h2>
               <p class="mt-4 text-sm text-gray-500">
                  Two-factor authentication (2FA) is a security method that requires two forms of identification to access resources and data. It's a type of multi-factor authentication (MFA) that can be used to strengthen the security of online accounts.
               </p>
               <div class="mt-4">
                  <button (click)="toggleMfa(profile.mfa ? 'disable': 'enable')" [disabled]="store.loading()" [ngClass]="[profile.mfa ? 'bg-yellow-500 hover:bg-yellow-700 focus:ring-yellow-300' : 'bg-green-600 hover:bg-green-700 focus:ring-green-300']"
                  class="disabled:bg-gray-300 text-white focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-md text-md px-4 p-2">
                  {{ profile.mfa ? 'Disable 2F Authentication' : 'Enable 2F Authentication' }}
                  </button>
               </div>
               @if (profile.mfa) {
               <div class="mt-4 flex flex-col items-center">
                  <p class="text-sm text-gray-500">Use your phone to scan this QR code to set up MFA</p>
                  <img class="w-64 h-w-64" [src]="profile.qrCodeImageUri" [alt]="profile.firstName + ' ' + profile.lastName" loading="lazy">
               </div>
               }
            </div>
            <div class="p-4 mb-10 rounded-lg bg-white border border-solid border-gray-200 overflow-auto">
               <h2 class="text-lg pb-2 font-semibold text-gray-800 border-b border-solid border-gray-200">
                  Manage Access
               </h2>
               <div class="flex flex-col md:flex-row items-start gap-3 mt-4">
                  <div class="block w-full md:w-1/2">
                     <label for="role" class="flex items-center mb-2 text-sm font-medium text-gray-600 w-full">
                        Role
                        <svg width="7" height="7" class="ml-1" viewBox="0 0 7 7" fill="none" xmlns="http://www.w3.org/2000/svg">
                           <path d="M3.11222 6.04545L3.20668 3.94744L1.43679 5.08594L0.894886 4.14134L2.77415 3.18182L0.894886 2.2223L1.43679 1.2777L3.20668 2.41619L3.11222 0.318182H4.19105L4.09659 2.41619L5.86648 1.2777L6.40838 2.2223L4.52912 3.18182L6.40838 4.14134L5.86648 5.08594L4.09659 3.94744L4.19105 6.04545H3.11222Z" fill="#EF4444"></path>
                        </svg>
                     </label>
                     <select (change)="updateRole($event)" [value]="profile.role" [disabled]="!(profile.role == 'ADMIN' || profile.role == 'SUPER_ADMIN')" name="role" class="disabled:bg-gray-100 disabled:border-none border border-gray-300 text-gray-900 text-sm font-normal rounded-lg block w-full py-2 px-3 focus:outline-none">
                     @for (role of ['USER', 'TECH_SUPPORT', 'MANAGER', 'ADMIN', 'SUPER_ADMIN']; track role) {
                     <option
                     [selected]="profile.role === role"
                     [ngValue]="role">{{role}}</option>
                     }
                     </select>
                  </div>
               </div>
               <div class="p-2 mt-4">
                  <p class="text-md text-gray-500">
                     User Access
                  </p>
                  @for (permission of profile.authorities.split(','); track permission) {
                  <div class="mt-2 p-2 mb-1 border border-gray-300 rounded-lg" role="alert">
                     <div class="flex items-center">
                        <h3 class="text-sm text-gray-900 uppercase px-1 rounded font-bold"
                        [ngClass]="[
                           permission.includes('create') ? 'bg-cyan-300' : '',
                           permission.includes('update') ? 'bg-yellow-400' : '',
                           permission.includes('read') ? 'bg-sky-500' : '',
                           permission.includes('delete') ? 'bg-red-500' : '']"
                    >{{permission}}</h3>
                     </div>
                     <div class="text-md text-gray-600">
                        {{'You have access to ' + permission.split(':')[1] + ' ' + permission.split(':')[0] }}
                     </div>
                  </div>
                  }
               </div>
               <p class="mt-4 text-sm text-gray-500">
                  Access management is usually provided as part of an identity and access management (IAM) solution. Whereas access management itself provides authentication tools to grant or deny user access, IAM solutions also include methods for managing user identity.
               </p>
            </div>
            <div class="p-4 rounded-lg bg-white border border-solid border-gray-200 overflow-auto">
               <h2 class="text-lg pb-2 font-semibold text-gray-800 border-b border-solid border-gray-200">
                  Recent Devices
               </h2>
               <div class="mt-4">
                  @for (device of devices; track device.deviceId) {
                     <div class="mb-2.5 border border-gray-100 rounded-md items-center gap-2 px-2 bg-gray-100">
                     <div class="flex flex-row items-center justify-between transition-all duration-500">
                            <div class="flex items-center gap-2">
                                <img src="https://cdn-icons-png.flaticon.com/512/548/548344.png" width="50" [alt]="device.device" class="rounded-md">
                                <div>
                                    <p class="font-normal text-sm text-gray-900">{{device.device}}</p>
                                    <p class="font-normal text-xs text-gray-500">{{device.client}}</p>
                                </div>
                            </div>
                        <div class="text-sm font-medium text-gray-900">{{device.ipAddress}}</div>
                        <div class="text-sm font-medium text-gray-900">{{device.createdAt | date: 'medium'}}</div>
                     </div>
                  </div>
               }
            </div>
               <p class="mt-4 text-sm text-gray-500">
                  Detect unauthorized access, suspicious login from unusual IP address and devices designed to build trust and transparency.
               </p>
            </div>
         </main>
      </div>
   </div>
   <form enctype="multipart/form-data" style="display:none;">
      <input type="file" #fileInput (change)="updatePhoto($event.target.files[0])" name="file" id="file" placeholder="file"
      ngModel accept="image/*" />
   </form>
   } @else {
   <div class="container mx-auto ">
      <div class="grid grid-cols-1 xl:grid-cols-3 lg:grid-cols-3 gap-4">
         <aside class="rounded-xl h-fit mt-5">
            <div role="status" class="animate-pulse bg-white rounded-lg p-2 border border-solid border-gray-200">
               <div class="h-3 bg-gray-200 rounded-full w-full mb-3"></div>
               <div class="h-3 bg-gray-200 rounded-full w-full mb-3"></div>
               <div class="h-3 bg-gray-200 rounded-full w-full mb-3"></div>
               <div class="h-3 bg-gray-200 rounded-full w-full mb-3"></div>
               <div class="h-3 bg-gray-200 rounded-full w-full mb-3"></div>
               <div class="h-3 bg-gray-200 rounded-full w-full"></div>
               <span class="sr-only">Loading...</span>
            </div>
         </aside>
         <main class="xl:col-span-2 lg:col-span-2 w-full">
            <div role="status" class="animate-pulse bg-white mt-5 rounded-lg p-2 border border-solid border-gray-200">
               <div class="flex items-center justify-start mt-4 mb-4">
                  <svg class="w-20 h-20 text-gray-200 me-4" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20">
                     <path d="M10 0a10 10 0 1 0 10 10A10.011 10.011 0 0 0 10 0Zm0 5a3 3 0 1 1 0 6 3 3 0 0 1 0-6Zm0 13a8.949 8.949 0 0 1-4.951-1.488A3.987 3.987 0 0 1 9 13h2a3.987 3.987 0 0 1 3.951 3.512A8.949 8.949 0 0 1 10 18Z"/>
                  </svg>
                  <div class="w-20 h-3 bg-gray-200 rounded-full me-3"></div>
               </div>
               <div class="h-3 bg-gray-200 rounded-full w-full mb-3"></div>
               <div class="h-3 bg-gray-200 rounded-full w-full mb-3"></div>
               <div class="h-3 bg-gray-200 rounded-full w-full mb-3"></div>
               <div class="h-3 bg-gray-200 rounded-full w-full mb-3"></div>
               <div class="h-3 bg-gray-200 rounded-full w-full mb-3"></div>
               <div class="h-3 bg-gray-200 rounded-full w-full mb-3"></div>
               <div class="h-3 bg-gray-200 rounded-full w-full mb-3"></div>
               <div class="h-3 bg-gray-200 rounded-full w-full mb-3"></div>
               <div class="h-3 bg-gray-200 rounded-full w-full mb-3"></div>
               <div class="h-3 bg-gray-200 rounded-full w-full mb-3"></div>
               <div class="h-3 bg-gray-200 rounded-full w-full mb-3"></div>
               <div class="h-3 bg-gray-200 rounded-full w-full mb-3"></div>
               <div class="h-3 bg-gray-200 rounded-full w-full mb-3"></div>
               <div class="h-3 bg-gray-200 rounded-full w-full mb-3"></div>
               <div class="h-3 bg-gray-200 rounded-full w-full mb-3"></div>
               <div class="h-3 bg-gray-200 rounded-full w-full mb-3"></div>
               <div class="h-3 bg-gray-200 rounded-full w-full mb-3"></div>
               <div class="h-3 bg-gray-200 rounded-full w-full mb-3"></div>
               <div class="h-3 bg-gray-200 rounded-full w-full mb-3"></div>
               <div class="h-3 bg-gray-200 rounded-full w-full mb-3"></div>
               <div class="h-3 bg-gray-200 rounded-full w-full"></div>
               <span class="sr-only">Loading...</span>
            </div>
         </main>
      </div>
   </div>
   }