@if (store?.ticketDetail()?.ticket) {
	@let profile = store?.profile();
	@let ticketUser = store?.ticketDetail()?.user;
	@let ticket = store?.ticketDetail()?.ticket;
	@let comments = store?.ticketDetail()?.comments;
	@let files = store?.ticketDetail()?.files;
	@let tasks = store?.ticketDetail()?.tasks;
	@let assignee = store?.ticketDetail()?.assignee;
	@let techSupports = store?.ticketDetail()?.techSupports;
	<!-- {{store?.ticketDetail() | json}} -->
	<div class="container mx-auto">
	  <div class="flex flex-wrap justify-between items-center space-y-5 md:space-y-0">
		<a (click)="goBack()" class="bg-gray-200 hover:bg-gray-300 p-1 rounded-full cursor-pointer">
		  <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-6">
			<path stroke-linecap="round" stroke-linejoin="round" d="M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18" />
		  </svg>
		</a>
		<h3 class="text-xl font-bold bg-gray-200 hover:bg-gray-300x rounded-md px-2">Ticket #{{ticket.ticketUuid.toUpperCase().split('-')[4]}}</h3>
	  </div>
	  <div class="mx-auto mt-3 mb-3 border-t border-gray-200"></div>
	</div>
	<div class="container mx-auto">
	  <div class="grid grid-cols-12 gap-6">
		<div class="col-span-12 xl:col-span-8">
		  <div class="flex flex-col gap-6 w-full">
			@if (profile?.role === 'MANAGER' || profile.role === 'TECH_SUPPORT' || profile.role === 'SUPER_ADMIN' || profile.role === 'ADMIN') {
				<div class="rounded-xl bg-white p-0.5 border border-solid border-gray-200 overflow-auto">
					<div class="p-4">
					  <div class="">
						<div class="flex flex-col items-start justify-between gap-y-6 md:flex-row md:items-center">
							<div>
								<div class="flex flex-row items-center justify-between gap-4">
									<img [src]="ticketUser?.imageUrl" [alt]="ticketUser?.firstName" class="object-cover w-20 h-20 rounded-lg">
									<div class="flex flex-row items-center justify-between">
									   <div>
										  <p class="text-lg m-0 font-bold">{{ticketUser.firstName}} {{ticketUser.lastName}}</p>
										  <p class="text-sm m-0 text-gray-500 font-normal">{{ticketUser?.email}}</p>
										  <p [ngClass]="[ticketUser?.enabled ? 'bg-green-600' : 'bg-red-700']"
											   class="m-0 w-max px-1 py-0.5 text-[12px] align-middle text-white font-bold rounded-md">
											{{ ticketUser?.enabled ? 'ACTIVE USER' : 'INACTIVE USER' }}
										  </p>
									   </div>
									</div>
								 </div>
							</div>
							<div class="pl-2 border-gray-300 border-l">
								<p class="text-xl font-bold">Member ID</p>
								<p class="text-sm text-gray-500 font-normal">{{ticketUser.memberId}}</p>						
							</div>
							<div class="pl-2 border-gray-300 border-l">
								<p class="text-xl font-bold">Phone</p>
								<p class="text-sm text-gray-500 font-normal">{{ticketUser.phone}}</p>
							</div>
							<div class="pl-2 border-gray-300 border-l">
								<p class="text-xl font-bold">Address</p>
								<p class="text-sm text-gray-500 font-normal">{{ticketUser.address}}</p>						
							</div>
						</div>
					  </div>
					</div>
				  </div>
				}
			<div class="p-5 rounded-xl bg-white border border-solid border-gray-200">
				<div class="flex flex-row justify-between items-center pb-4 border-b border-solid border-gray-200">
				  <h5 class="text-base font-semibold text-gray-900">
					Ticket
					<span [ngClass]="[ticket.status === 'COMPLETED' ? 'bg-green-600' : '',
					ticket.status === 'NEW' ? 'bg-yellow-400' : '',
					ticket.status === 'IN PROGRESS' ? 'bg-green-400' : '',
					ticket.status === 'IN REVIEW' ? 'bg-sky-500' : '',
					ticket.status === 'CLOSED' ? 'bg-red-700' : '',
					ticket.status === 'PENDING' ? 'bg-orange-400' : '',
					ticket.status === 'ASSIGNED' ? 'bg-blue-600' : '',
					ticket.status === 'UNASSIGNED' ? 'bg-yellow-600' : '',
					ticket.status === 'IMPEDED' ? 'bg-red-500' : '']"
					   class="px-1 py-0.5 text-[12px] align-middle text-white font-bold rounded-md">
					{{ ticket.status }}
					</span>
				  </h5>
				  @if(mode() === 'view') {
				  <button (click)="switchMode()"
					class="text-blue-700 border border-solid border-gray-200 hover:bg-gray-200 font-medium rounded-lg text-sm p-2">
					<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-5">
					  <path stroke-linecap="round" stroke-linejoin="round" d="m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10" />
					</svg>
				  </button>
				  }
				</div>
				<form #ticketForm="ngForm" (ngSubmit)="updateTicket(ticketForm)" class="flex flex-col gap-4 pt-4">
					<input type="hidden" [ngModel]="ticket.ticketUuid" name="ticketUuid" required />
					<div class="relative">
					<label class="flex items-center mb-2 text-gray-600 text-sm font-medium">
					Title
					</label>
					<input type="text" [ngModel]="ticket.title" [disabled]="mode() === 'view'" autocomplete="off" name="title" class="disabled:bg-gray-100 disabled:border-none block w-full px-3 py-1.5 pr-8 text-sm font-normal shadow-xs text-gray-900 bg-transparent border border-gray-300 rounded-lg placeholder-gray-400 focus:outline-none leading-relaxed" placeholder="Ticket title" required>
				  </div>
				  <div class="relative">
					<label class="flex items-center mb-2 text-gray-600 text-sm font-medium" for="bio">
					  Description
					  <svg width="7" height="7" class="ml-1" viewBox="0 0 7 7" fill="none" xmlns="http://www.w3.org/2000/svg">
						<path d="M3.11222 6.04545L3.20668 3.94744L1.43679 5.08594L0.894886 4.14134L2.77415 3.18182L0.894886 2.2223L1.43679 1.2777L3.20668 2.41619L3.11222 0.318182H4.19105L4.09659 2.41619L5.86648 1.2777L6.40838 2.2223L4.52912 3.18182L6.40838 4.14134L5.86648 5.08594L4.09659 3.94744L4.19105 6.04545H3.11222Z" fill="#EF4444"></path>
					  </svg>
					</label>
					<textarea name="description" #textArea [ngModel]="ticket.description" [disabled]="mode() === 'view'" placeholder="Ticket description" cols="" [rows]="5" class="disabled:bg-gray-100 disabled:border-none text-sm font-normal shadow-xs text-gray-900 placeholder-gray-400 rounded-lg border border-gray-300 p-2 w-full"></textarea>
				  </div>
				  <div class="flex flex-col md:flex-row items-start gap-3">
					<div class="block w-full md:w-1/2">
					  <label for="countries" class="mb-2 text-sm font-medium text-gray-600 w-full flex items-center">
						Type
						<svg width="7" height="7" class="ml-1" viewBox="0 0 7 7" fill="none" xmlns="http://www.w3.org/2000/svg">
						  <path d="M3.11222 6.04545L3.20668 3.94744L1.43679 5.08594L0.894886 4.14134L2.77415 3.18182L0.894886 2.2223L1.43679 1.2777L3.20668 2.41619L3.11222 0.318182H4.19105L4.09659 2.41619L5.86648 1.2777L6.40838 2.2223L4.52912 3.18182L6.40838 4.14134L5.86648 5.08594L4.09659 3.94744L4.19105 6.04545H3.11222Z" fill="#EF4444"></path>
						</svg>
					  </label>
					  <select [ngModel]="ticket.type" [disabled]="mode() === 'view'" name="type" class="disabled:bg-gray-100 disabled:border-none border border-gray-300 text-gray-900 text-sm font-normal rounded-lg block w-full py-2 px-3 focus:outline-none">
					  @for (type of ['BUG', 'DEFECT', 'INCIDENT', 'ENHANCEMENT', 'DESIGN']; track type) {
					  <option
					  [selected]="ticket.type === type"
					  [value]="type">{{type}}</option>
					  }
					  </select>
					</div>
					<div class="block w-full md:w-1/2">
					  <label for="countries" class="flex items-center mb-2 text-sm font-medium text-gray-600 w-full">
						Status
						<svg width="7" height="7" class="ml-1" viewBox="0 0 7 7" fill="none" xmlns="http://www.w3.org/2000/svg">
						  <path d="M3.11222 6.04545L3.20668 3.94744L1.43679 5.08594L0.894886 4.14134L2.77415 3.18182L0.894886 2.2223L1.43679 1.2777L3.20668 2.41619L3.11222 0.318182H4.19105L4.09659 2.41619L5.86648 1.2777L6.40838 2.2223L4.52912 3.18182L6.40838 4.14134L5.86648 5.08594L4.09659 3.94744L4.19105 6.04545H3.11222Z" fill="#EF4444"></path>
						</svg>
					  </label>
					  <select [ngModel]="ticket.status" [disabled]="mode() === 'view'" name="status" class="disabled:bg-gray-100 disabled:border-none border border-gray-300 text-gray-900 text-sm font-normal rounded-lg block w-full py-2 px-3 focus:outline-none">
					  @for (status of ['IN PROGRESS', 'NEW', 'IN REVIEW', 'COMPLETED', 'IMPEDED', 'ASSIGNED', 'UNASSIGNED', 'CLOSED', 'PENDING']; track status) {
					  <option
					  [selected]="ticket.status === status"
					  [value]="status">{{status}}</option>
					  }
					  </select>
					</div>
				  </div>
				  <div class="flex flex-col md:flex-row items-start gap-3">
					<div class="block w-full md:w-1/2">
					  <label for="countries" class="flex items-center mb-2 text-sm font-medium text-gray-600 w-full">
						Priority
						<svg width="7" height="7" class="ml-1" viewBox="0 0 7 7" fill="none" xmlns="http://www.w3.org/2000/svg">
						  <path d="M3.11222 6.04545L3.20668 3.94744L1.43679 5.08594L0.894886 4.14134L2.77415 3.18182L0.894886 2.2223L1.43679 1.2777L3.20668 2.41619L3.11222 0.318182H4.19105L4.09659 2.41619L5.86648 1.2777L6.40838 2.2223L4.52912 3.18182L6.40838 4.14134L5.86648 5.08594L4.09659 3.94744L4.19105 6.04545H3.11222Z" fill="#EF4444"></path>
						</svg>
					  </label>
					  <select [ngModel]="ticket.priority" [disabled]="mode() === 'view'" name="priority" class="disabled:bg-gray-100 disabled:border-none border border-gray-300 text-gray-900 text-sm font-normal rounded-lg block w-full py-2 px-3 focus:outline-none">
					  @for (priority of ['HIGH', 'MEDIUM', 'LOW']; track priority) {
					  <option
					  [selected]="ticket.priority === priority"
					  [value]="priority">{{priority}}</option>
					  }
					  </select>
					</div>
					<div class="block w-full md:w-1/2">
					  <label for="countries" class="mb-2 text-sm font-medium text-gray-600 w-full flex items-center">
					  Due Date
					  </label>
					  <!-- <input type="date" [ngModel]="mode() === 'view' ? ticket.dueDate : undefined" name="dueDate" [disabled]="mode() === 'view'" autocomplete="off" class="disabled:bg-gray-100 disabled:border-none block w-full px-3 py-1.5 text-sm font-normal shadow-xs text-gray-900 bg-transparent border border-gray-300 rounded-lg placeholder-gray-400 focus:outline-none leading-relaxed" required> -->
					  <input [type]="mode() === 'view' ? 'text' : 'datetime-local'" [ngModel]="ticket.dueDate | date: mode() === 'view' ? 'mediumDate' : 'YYYY-MM-dd HH:mm:ss'" name="dueDate" [disabled]="mode() === 'view'" autocomplete="off" class="disabled:bg-gray-100 disabled:border-none block w-full px-3 py-1.5 text-sm font-normal shadow-xs text-gray-900 bg-transparent border border-gray-300 rounded-lg placeholder-gray-400 focus:outline-none leading-relaxed" required>
					</div>
				  </div>
				  <div class="flex flex-col md:flex-row items-start gap-3">
					<div class="block w-full md:w-1/2">
					  <label for="countries" class="flex items-center mb-2 text-sm font-medium text-gray-600 w-full">
						Progress ({{ticket.progress}}%)
						<svg width="7" height="7" class="ml-1" viewBox="0 0 7 7" fill="none" xmlns="http://www.w3.org/2000/svg">
						  <path d="M3.11222 6.04545L3.20668 3.94744L1.43679 5.08594L0.894886 4.14134L2.77415 3.18182L0.894886 2.2223L1.43679 1.2777L3.20668 2.41619L3.11222 0.318182H4.19105L4.09659 2.41619L5.86648 1.2777L6.40838 2.2223L4.52912 3.18182L6.40838 4.14134L5.86648 5.08594L4.09659 3.94744L4.19105 6.04545H3.11222Z" fill="#EF4444"></path>
						</svg>
					  </label>
					  <input type="number" [ngModel]="ticket.progress" name="progress" min="0" max="100" autocomplete="off" [disabled]="mode() === 'view'" class=" disabled:bg-gray-100 disabled:border-none block w-full px-3 py-1.5 pr-8 text-sm font-normal shadow-xs text-gray-900 bg-transparent border border-gray-300 rounded-lg placeholder-gray-400 focus:outline-none leading-relaxed" required>
					</div>
					<div class="block w-full md:w-1/2">
					  <label for="countries" class="mb-2 text-sm font-medium text-gray-600 w-full flex items-center">
					  Created Date
					  </label>
					  <input type="text" [ngModel]="ticket.createdAt | date: 'mediumDate'" name="createdAt" disabled autocomplete="off" class="disabled:bg-gray-100 disabled:border-none block w-full px-3 py-1.5 text-sm font-normal shadow-xs text-gray-900 bg-transparent border border-gray-300 rounded-lg placeholder-gray-400 focus:outline-none leading-relaxed" required>
					</div>
				  </div>
				  <div class="flex flex-row items-end justify-end gap-3">
                     @if(mode() === 'edit') {
                     <button (click)="switchMode()" type="button"
                        class="text-white bg-yellow-400 hover:bg-yellow-500 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-md text-sm p-2">
                     Cancel
                     </button>
                     <button [disabled]="ticketForm.invalid" type="submit" class="disabled:bg-gray-300 text-white bg-blue-600 hover:bg-blue-700 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-md text-sm p-2">
                     Update Ticket
                     </button>
                     }
                  </div>
				</form>
			  </div>
			  <div class="mt-5 rounded-xl bg-white p-0.5 border border-solid border-gray-200 overflow-auto">
				<div class="p-4">
				  <h5 class="text-base font-semibold text-gray-900 pb-4 border-b border-solid border-gray-200">
					Comments ({{comments?.length}})
				  </h5>
				  <div class="mt-6">
					<form #commentForm="ngForm" (ngSubmit)="addComment(commentForm)" class="mb-8">
					  <label for="search" class="mb-2 text-sm font-medium text-gray-900 sr-only">Post comment</label>
					  <div class="flex items-center justify-between gap-x-2">
						<input type="text" ngModel name="comment" autocomplete="off" class="block w-full p-3 text-sm text-gray-900 border border-gray-300 rounded-lg bg-gray-50 focus:ring-blue-500 focus:border-blue-500" placeholder="Add a comment" required />
						<input type="hidden" [ngModel]="ticket.ticketUuid" name="ticketUuid" autocomplete="off" required- />
						<button type="submit" [disabled]="commentForm.invalid" class="disabled:bg-gray-300 disabled:border-none text-white bg-blue-600 hover:bg-blue-700 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm p-3">Post</button>
					  </div>
					</form>
					@if (comments?.length >= 1) {
						@for (comment of comments; track comment) {
							<div class="mt-4 flex items-start gap-2.5">
								<img class="w-8 h-8 rounded-full" [src]="comment.imageUrl" [alt]="comment.firstName + ' ' + comment.lastName" loading="lazy">
								<div class="w-full">
								  <div class="flex items-center justify-between">
									<div>
										<span class="mr-2 text-sm font-semibold text-gray-900">{{comment.firstName}} {{comment.lastName}}</span>
										<span class="text-sm font-normal text-gray-500">{{comment.updatedAt | date: 'medium'}}</span>
										<span class="ml-1 text-xs font-normal text-gray-500">{{comment.edited ?'Edited' : ''}}</span>
									</div>
									<div class="flex items-center justify-between gap-2">
										@if (comment.userUuid === profile.userUuid) {
										@if (commentMode().mode == 'view') {
											<button (click)="toggleCommentMode('edit', comment.commentUuid)" class="rounded-md py-0.5 px-1 text-xs font-medium text-gray-600 transition-all duration-300 hover:underline">
											Edit
										  </button>
										}
										@if (commentMode().mode == 'edit' && commentMode().commentUuid == comment.commentUuid) {
											<button (click)="updateComment(comment.commentUuid, commentVariable.value)" class="rounded-md py-0.5 px-1 text-xs font-medium text-gray-600 transition-all duration-300 hover:underline">
												Save
											  </button>
										}
										@if (commentMode().mode == 'view') {
											<button (click)="deleteComment(comment.commentUuid)" class="rounded-md py-0.5 px-1 text-xs font-medium text-gray-600 transition-all duration-300 hover:underline">
											Delete
										  </button>
										}
										@if (commentMode().mode == 'edit' && commentMode().commentUuid == comment.commentUuid) {
											<button (click)="toggleCommentMode('view', null)" class="rounded-md py-0.5 px-1 text-xs font-medium text-gray-600 transition-all duration-300 hover:underline">
												Cancel
											  </button>
										}
									}
									</div>
								  </div>
								  <div class=" border-gray-200">
									@if (commentMode().commentUuid !== comment.commentUuid) {
										<p class="bg-gray-100 rounded-e-xl rounded-es-xl text-sm font-normal text-gray-900 px-2 py-4">{{comment.comment}}</p>
									}
									<input type="text" (keydown.enter)="updateComment(comment.commentUuid, commentVariable.value)" #commentVariable [value]="comment.comment" autofocus [ngClass]="[commentMode().commentUuid == comment.commentUuid ? '' : 'hidden']" autofocus name="commentUpdate" class="block w-full px-2 py-1.5 pr-8 text-sm font-normal shadow-xs text-gray-900 bg-transparent border border-gray-300 rounded-lg placeholder-gray-400 focus:outline-none leading-relaxed" placeholder="Edit comment">
								  </div>
								</div>
							</div>}
					} @else {
						<p class="flex flex-row justify-center items-center mb-3">No comments found</p>
					}
				  </div>
				</div>
			  </div>
		  </div>
		</div>
		<div class="col-span-12 xl:col-span-4">
		  <div class="flex flex-col gap-6 w-full lg:sticky lg:top-[135px]">
			<div class="rounded-xl p-4 bg-white border border-solid border-gray-200 grid grid-cols-12">
			  <div class="col-span-12">
				<div class="grid grid-cols-2">
				  <div class="border-r border-b border-gray-200 pt-2 pr-4 pb-4 pl-2">
					<div class="rounded-lg p-2.5 bg-amber-50 w-max mb-2">
					  <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-6">
						<path stroke="#F59E0B" stroke-linecap="round" stroke-linejoin="round" d="M9 12h3.75M9 15h3.75M9 18h3.75m3 .75H18a2.25 2.25 0 0 0 2.25-2.25V6.108c0-1.135-.845-2.098-1.976-2.192a48.424 48.424 0 0 0-1.123-.08m-5.801 0c-.065.21-.1.433-.1.664 0 .414.336.75.75.75h4.5a.75.75 0 0 0 .75-.75 2.25 2.25 0 0 0-.1-.664m-5.8 0A2.251 2.251 0 0 1 13.5 2.25H15c1.012 0 1.867.668 2.15 1.586m-5.8 0c-.376.023-.75.05-1.124.08C9.095 4.01 8.25 4.973 8.25 6.108V8.25m0 0H4.875c-.621 0-1.125.504-1.125 1.125v11.25c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125V9.375c0-.621-.504-1.125-1.125-1.125H8.25ZM6.75 12h.008v.008H6.75V12Zm0 3h.008v.008H6.75V15Zm0 3h.008v.008H6.75V18Z" />
					  </svg>
					</div>
					<div class="flex items-center justify-between">
					  <h5 class="text-xl font-semibold text-gray-900 leading-8">{{tasks?.length}}</h5>
					</div>
					<h6 class="text-xs font-normal text-gray-500">Tasks</h6>
				  </div>
				  <div class="border-b border-gray-200 pt-2 pb-4 pl-6">
					<div class="rounded-lg p-2.5 bg-sky-50 w-max mb-2">
					  <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-6">
						<path stroke="#0284C7" stroke-linecap="round" stroke-linejoin="round" d="M20.25 8.511c.884.284 1.5 1.128 1.5 2.097v4.286c0 1.136-.847 2.1-1.98 2.193-.34.027-.68.052-1.02.072v3.091l-3-3c-1.354 0-2.694-.055-4.02-.163a2.115 2.115 0 0 1-.825-.242m9.345-8.334a2.126 2.126 0 0 0-.476-.095 48.64 48.64 0 0 0-8.048 0c-1.131.094-1.976 1.057-1.976 2.192v4.286c0 .837.46 1.58 1.155 1.951m9.345-8.334V6.637c0-1.621-1.152-3.026-2.76-3.235A48.455 48.455 0 0 0 11.25 3c-2.115 0-4.198.137-6.24.402-1.608.209-2.76 1.614-2.76 3.235v6.226c0 1.621 1.152 3.026 2.76 3.235.577.075 1.157.14 1.74.194V21l4.155-4.155" />
					  </svg>
					</div>
					<div class="flex items-center justify-between">
					  <h5 class="text-xl font-semibold text-gray-900 leading-8">{{comments?.length}}</h5>
					</div>
					<h6 class="text-xs font-normal text-gray-500">Comments</h6>
				  </div>
				  <div class="border-r border-gray-200 pt-4 pr-4 pb-2 pl-2">
					<div class="rounded-lg p-2.5 bg-blue-50 w-max mb-2">
					  <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none">
						<path d="M14.1667 3.75001L14.1667 4.55001L14.1667 3.75001ZM5.83333 3.75002L5.83333 2.95002L5.83333 3.75002ZM6.70898 12.4667C7.15081 12.4667 7.50898 12.1085 7.50898 11.6667C7.50898 11.2248 7.15081 10.8667 6.70898 10.8667V12.4667ZM6.66732 10.8667C6.22549 10.8667 5.86732 11.2248 5.86732 11.6667C5.86732 12.1085 6.22549 12.4667 6.66732 12.4667V10.8667ZM6.70898 14.9667C7.15081 14.9667 7.50898 14.6085 7.50898 14.1667C7.50898 13.7248 7.15081 13.3667 6.70898 13.3667V14.9667ZM6.66732 13.3667C6.22549 13.3667 5.86732 13.7248 5.86732 14.1667C5.86732 14.6085 6.22549 14.9667 6.66732 14.9667V13.3667ZM10.0423 12.4667C10.4841 12.4667 10.8423 12.1085 10.8423 11.6667C10.8423 11.2248 10.4841 10.8667 10.0423 10.8667V12.4667ZM10.0007 10.8667C9.55882 10.8667 9.20065 11.2248 9.20065 11.6667C9.20065 12.1085 9.55882 12.4667 10.0007 12.4667V10.8667ZM10.0423 14.9667C10.4841 14.9667 10.8423 14.6085 10.8423 14.1667C10.8423 13.7248 10.4841 13.3667 10.0423 13.3667V14.9667ZM10.0007 13.3667C9.55882 13.3667 9.20065 13.7248 9.20065 14.1667C9.20065 14.6085 9.55882 14.9667 10.0007 14.9667V13.3667ZM13.3757 12.4667C13.8175 12.4667 14.1757 12.1085 14.1757 11.6667C14.1757 11.2248 13.8175 10.8667 13.3757 10.8667V12.4667ZM13.334 10.8667C12.8922 10.8667 12.534 11.2248 12.534 11.6667C12.534 12.1085 12.8922 12.4667 13.334 12.4667V10.8667ZM13.3757 14.9667C13.8175 14.9667 14.1757 14.6085 14.1757 14.1667C14.1757 13.7248 13.8175 13.3667 13.3757 13.3667V14.9667ZM13.334 13.3667C12.8922 13.3667 12.534 13.7248 12.534 14.1667C12.534 14.6085 12.8922 14.9667 13.334 14.9667V13.3667ZM7.46667 2.5C7.46667 2.05817 7.10849 1.7 6.66667 1.7C6.22484 1.7 5.86667 2.05817 5.86667 2.5H7.46667ZM5.86667 5C5.86667 5.44183 6.22484 5.8 6.66667 5.8C7.10849 5.8 7.46667 5.44183 7.46667 5H5.86667ZM14.1333 2.5C14.1333 2.05817 13.7752 1.7 13.3333 1.7C12.8915 1.7 12.5333 2.05817 12.5333 2.5H14.1333ZM12.5333 5C12.5333 5.44183 12.8915 5.8 13.3333 5.8C13.7752 5.8 14.1333 5.44183 14.1333 5H12.5333ZM5.83333 4.55002L14.1667 4.55001L14.1667 2.95001L5.83333 2.95002L5.83333 4.55002ZM16.7 7.08334V14.1667H18.3V7.08334H16.7ZM14.1667 16.7H5.83333V18.3H14.1667V16.7ZM3.3 14.1667V7.08335H1.7V14.1667H3.3ZM5.83333 16.7C5.02504 16.7 4.4993 16.6983 4.11115 16.6461C3.746 16.597 3.6245 16.5168 3.55384 16.4462L2.42247 17.5776C2.83996 17.995 3.35538 18.1589 3.89795 18.2319C4.4175 18.3017 5.07027 18.3 5.83333 18.3V16.7ZM1.7 14.1667C1.7 14.9298 1.6983 15.5825 1.76815 16.1021C1.8411 16.6446 2.00498 17.1601 2.42247 17.5776L3.55384 16.4462C3.48318 16.3755 3.40298 16.254 3.35389 15.8889C3.3017 15.5007 3.3 14.975 3.3 14.1667H1.7ZM16.7 14.1667C16.7 14.975 16.6983 15.5007 16.6461 15.8889C16.597 16.254 16.5168 16.3755 16.4462 16.4462L17.5775 17.5776C17.995 17.1601 18.1589 16.6446 18.2318 16.1021C18.3017 15.5825 18.3 14.9298 18.3 14.1667H16.7ZM14.1667 18.3C14.9297 18.3 15.5825 18.3017 16.1021 18.2319C16.6446 18.1589 17.16 17.995 17.5775 17.5776L16.4462 16.4462C16.3755 16.5168 16.254 16.597 15.8889 16.6461C15.5007 16.6983 14.975 16.7 14.1667 16.7V18.3ZM14.1667 4.55001C14.975 4.55 15.5007 4.5517 15.8889 4.60389C16.254 4.65298 16.3755 4.73318 16.4462 4.80384L17.5775 3.67247C17.16 3.25498 16.6446 3.0911 16.102 3.01816C15.5825 2.9483 14.9297 2.95 14.1667 2.95001L14.1667 4.55001ZM18.3 7.08334C18.3 6.32028 18.3017 5.66751 18.2318 5.14795C18.1589 4.60538 17.995 4.08996 17.5775 3.67247L16.4462 4.80384C16.5168 4.87451 16.597 4.996 16.6461 5.36115C16.6983 5.74931 16.7 6.27505 16.7 7.08334H18.3ZM5.83333 2.95002C5.07027 2.95002 4.4175 2.94832 3.89794 3.01818C3.35538 3.09112 2.83996 3.255 2.42247 3.67249L3.55384 4.80386C3.6245 4.7332 3.746 4.653 4.11114 4.60391C4.4993 4.55172 5.02504 4.55002 5.83333 4.55002L5.83333 2.95002ZM3.3 7.08335C3.3 6.27506 3.3017 5.74933 3.35389 5.36117C3.40298 4.99602 3.48318 4.87453 3.55384 4.80386L2.42247 3.67249C2.00498 4.08999 1.8411 4.6054 1.76815 5.14797C1.6983 5.66752 1.7 6.3203 1.7 7.08335H3.3ZM2.5 9.13333H17.5V7.53333H2.5V9.13333ZM6.70898 10.8667H6.66732V12.4667H6.70898V10.8667ZM6.70898 13.3667H6.66732V14.9667H6.70898V13.3667ZM10.0423 10.8667H10.0007V12.4667H10.0423V10.8667ZM10.0423 13.3667H10.0007V14.9667H10.0423V13.3667ZM13.3757 10.8667H13.334V12.4667H13.3757V10.8667ZM13.3757 13.3667H13.334V14.9667H13.3757V13.3667ZM5.86667 2.5V5H7.46667V2.5H5.86667ZM12.5333 2.5V5H14.1333V2.5H12.5333Z"
						  fill="#2563EB"></path>
					  </svg>
					</div>
					<div class="flex items-center justify-between">
					  <h5 class="text-xl font-semibold text-gray-900 leading-8">{{ticket.dueDate | date: 'mediumDate'}}</h5>
					</div>
					<h6 class="text-xs font-normal text-gray-500">Due Date</h6>
				  </div>
				  <div class="pt-4 pb-2 pl-6">
					<div class="rounded-lg p-2.5 bg-pink-50 w-max mb-2">
					  <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20"
						fill="none">
						<path
						  d="M15.8247 5.30278L16.4226 4.77129L16.4226 4.77129L15.8247 5.30278ZM14.3278 3.61879L13.7299 4.15028L13.7299 4.15028L14.3278 3.61879ZM13.2677 2.64627L12.9399 3.37606L12.9399 3.37606L13.2677 2.64627ZM16.5579 6.29136L15.8101 6.57567L15.8101 6.57567L16.5579 6.29136ZM15.9344 16.7678L16.5001 17.3335L16.5001 17.3335L15.9344 16.7678ZM12.1154 5.74182L12.9 5.58574L12.9 5.58574L12.1154 5.74182ZM13.4249 7.05131L13.2688 7.83594L13.2688 7.83594L13.4249 7.05131ZM5.83334 10.0333C5.39152 10.0333 5.03334 10.3915 5.03334 10.8333C5.03334 11.2752 5.39152 11.6333 5.83334 11.6333V10.0333ZM12.5 11.6333C12.9418 11.6333 13.3 11.2752 13.3 10.8333C13.3 10.3915 12.9418 10.0333 12.5 10.0333V11.6333ZM5.83334 12.5333C5.39152 12.5333 5.03334 12.8915 5.03334 13.3333C5.03334 13.7752 5.39152 14.1333 5.83334 14.1333V12.5333ZM10 14.1333C10.4418 14.1333 10.8 13.7752 10.8 13.3333C10.8 12.8915 10.4418 12.5333 10 12.5333V14.1333ZM11.6667 16.7H8.33334V18.3H11.6667V16.7ZM4.13334 12.5V7.5H2.53334V12.5H4.13334ZM15.8667 7.51733V12.5H17.4667V7.51733H15.8667ZM8.33334 3.3H11.8365V1.7H8.33334V3.3ZM11.8365 3.3C12.6448 3.3 12.8071 3.31639 12.9399 3.37606L13.5954 1.91647C13.0768 1.68361 12.5021 1.7 11.8365 1.7V3.3ZM14.9257 3.0873C14.4835 2.58976 14.1139 2.14934 13.5954 1.91647L12.9399 3.37606C13.0728 3.43573 13.1929 3.54614 13.7299 4.15028L14.9257 3.0873ZM17.4667 7.51733C17.4667 6.95027 17.4788 6.46239 17.3057 6.00706L15.8101 6.57567C15.8546 6.69265 15.8667 6.83131 15.8667 7.51733H17.4667ZM15.2268 5.83428C15.6825 6.34701 15.7656 6.45869 15.8101 6.57567L17.3057 6.00706C17.1325 5.55173 16.7994 5.19512 16.4226 4.77129L15.2268 5.83428ZM8.33334 16.7C7.13222 16.7 6.31185 16.6983 5.69676 16.6156C5.10469 16.536 4.82396 16.3948 4.63126 16.2021L3.49989 17.3335C4.03942 17.873 4.71407 18.0979 5.48357 18.2013C6.23005 18.3017 7.17745 18.3 8.33334 18.3V16.7ZM2.53334 12.5C2.53334 13.6559 2.53164 14.6033 2.63201 15.3498C2.73546 16.1193 2.96036 16.7939 3.49989 17.3335L4.63126 16.2021C4.43856 16.0094 4.29734 15.7287 4.21774 15.1366C4.13504 14.5215 4.13334 13.7011 4.13334 12.5H2.53334ZM11.6667 18.3C12.8226 18.3 13.77 18.3017 14.5165 18.2013C15.2859 18.0979 15.9606 17.873 16.5001 17.3335L15.3688 16.2021C15.1761 16.3948 14.8953 16.536 14.3033 16.6156C13.6882 16.6983 12.8678 16.7 11.6667 16.7V18.3ZM15.8667 12.5C15.8667 13.7011 15.865 14.5215 15.7823 15.1366C15.7027 15.7287 15.5615 16.0094 15.3688 16.2021L16.5001 17.3335C17.0397 16.7939 17.2646 16.1193 17.368 15.3498C17.4684 14.6033 17.4667 13.6559 17.4667 12.5H15.8667ZM4.13334 7.5C4.13334 6.29887 4.13504 5.47851 4.21774 4.86342C4.29734 4.27134 4.43856 3.99062 4.63126 3.79792L3.49989 2.66655C2.96036 3.20608 2.73546 3.88073 2.63201 4.65022C2.53164 5.3967 2.53334 6.3441 2.53334 7.5H4.13334ZM8.33334 1.7C7.17745 1.7 6.23005 1.6983 5.48357 1.79866C4.71407 1.90212 4.03942 2.12702 3.49989 2.66655L4.63126 3.79792C4.82396 3.60522 5.10469 3.464 5.69676 3.3844C6.31185 3.3017 7.13222 3.3 8.33334 3.3V1.7ZM11.2833 2.5V5H12.8833V2.5H11.2833ZM14.1667 7.88333H16.6667V6.28333H14.1667V7.88333ZM11.2833 5C11.2833 5.34887 11.2795 5.64013 11.3307 5.89789L12.9 5.58574C12.8872 5.52151 12.8833 5.42556 12.8833 5H11.2833ZM14.1667 6.28333C13.7411 6.28333 13.6452 6.27946 13.5809 6.26668L13.2688 7.83594C13.5265 7.88721 13.8178 7.88333 14.1667 7.88333V6.28333ZM11.3307 5.89789C11.5254 6.87639 12.2903 7.6413 13.2688 7.83594L13.5809 6.26668C13.2371 6.19829 12.9684 5.92954 12.9 5.58574L11.3307 5.89789ZM5.83334 11.6333H12.5V10.0333H5.83334V11.6333ZM5.83334 14.1333H10V12.5333H5.83334V14.1333ZM16.4226 4.77129L14.9257 3.0873L13.7299 4.15028L15.2268 5.83428L16.4226 4.77129Z"
						  fill="#DB2777"></path>
					  </svg>
					</div>
					<div class="flex items-center justify-between">
					  <h5 class="text-xl font-semibold text-gray-900 leading-8">{{files?.length}}</h5>
					</div>
					<h6 class="text-xs font-normal text-gray-500">Attachments</h6>
				  </div>
				</div>
			  </div>
			  <div class="col-span-12 relative mt-4">
				<h5 class="text-base font-semibold text-gray-900">
				  Progress
				</h5>
				<div class="flex items-center justify-center">
				  <div class="relative flex items-center w-full">
					<div class="relative w-full h-2.5  overflow-hidden rounded-3xl bg-gray-100">
					  <div role="progressbar" aria-valuenow="20" aria-valuemin="0" aria-valuemax="100" [style.width]="ticket.progress + '%'" class="flex h-full items-center justify-center bg-blue-600  text-white rounded-3xl">
					  </div>
					</div>
					<span class="ml-2 bg-white  rounded-full  text-gray-800 text-xs font-medium flex justify-center items-center">{{ticket.progress}}%</span>
				  </div>
				</div>
			  </div>
			</div>
			<div class="rounded-xl p-4 bg-white border border-solid border-gray-200">
			  <div class="flex items-center justify-between pb-4 border-b border-solid border-gray-200">
				<h5 class="text-base font-semibold text-gray-900">
				  Assigned To
				</h5>
			  </div>
				<div class="mt-4 flex items-center justify-between rounded-md">
				  @if (assignee.firstName) {
					<div class="flex items-center justify-start gap-2">
					<img [src]="assignee.imageUrl" [alt]="assignee.firstName + ' ' + assignee.lastName" class="w-12 h-12 aspect-square object-cover rounded-full" loading="lazy"/>
				  <div>
					<h6 class="text-xs font-semibold text-gray-900 mb-0.5">
					  {{assignee.firstName}} {{assignee.lastName}}
					</h6>
					<p class="text-xs font-normal text-gray-500">
					  {{assignee.email}}
					</p>
				  </div>
				</div>
					} @else {
						<p>Not yet assigned</p>
					}	
				  <div class="">					
					<form class="max-w-sm mx-auto">
						<label for="role" class="text-sm font-medium text-gray-600">
							Choose Assignee
						 </label>
						<select [disabled]="!(profile.role === 'MANAGER' || profile.role === 'TECH_SUPPORT' || profile.role === 'SUPER_ADMIN' || profile.role === 'ADMIN')" (change)="updateAssignee(ticket.ticketUuid, $event.target.value)" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5">
							<option [disabled]="assignee.firstName !== null">Choose Assignee</option>
							@for (techSupport of techSupports; track techSupport) {
								<option
								[disabled]="techSupport.firstName === assignee.firstName"
								[selected]="techSupport.firstName === assignee.firstName"
								[value]="techSupport.userUuid">{{techSupport.firstName}} {{techSupport.lastName}}</option>
								}
						</select>
					</form>  
				  </div>
			  </div>
			</div>
			<div class="rounded-xl p-4 bg-white border border-solid border-gray-200">
			  <div class="flex items-center justify-between pb-4 border-b border-solid border-gray-200">
				<h5 class="text-base font-semibold text-gray-900">
				  Attachments ({{files?.length}})
				</h5>
				<button (click)="filesInput.click()" class="flex items-center rounded-md bg-blue-600 hover:bg-blue-700 py-2.5 p-3 gap-1.5 text-xs font-medium text-white transition-all duration-300">
				  Upload
				  <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-4">
					<path stroke-linecap="round" stroke-linejoin="round" d="M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5m-13.5-9L12 3m0 0 4.5 4.5M12 3v13.5" />
				  </svg>
				</button>
			  </div>
			  <div class="mt-6 flex flex-col gap-6">
				@if (files?.length > 0) {
					@for (file of files; track file) {
					<div class="flex items-center justify-between gap-3 w-full border border-solid border-gray-300 rounded-md p-2.5">
					  <div class="flex items-center gap-3">
						<div class="">
						  <div class="w-10 h-10 rounded-md bg-gray-200 p-2">
							<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-6">
							  <path stroke-linecap="round" stroke-linejoin="round" d="m18.375 12.739-7.693 7.693a4.5 4.5 0 0 1-6.364-6.364l10.94-10.94A3 3 0 1 1 19.5 7.372L8.552 18.32m.009-.01-.01.01m5.699-9.941-7.81 7.81a1.5 1.5 0 0 0 2.112 2.13" />
							</svg>
						  </div>
						</div>
						<div class="block">
						  <h6 class="text-xs font-semibold text-gray-900 mb-0.5">
							{{file.name}}
						  </h6>
						  <p class="text-xs font-normal text-gray-500">
							{{file.formattedSize}} &middot; {{file.createdAt | date: 'mediumDate'}}
						  </p>
						</div>
					  </div>
					  <div class="flex items-center gap-3">
						<button (click)="downloadFile(file.fileUuid)" class="rounded-lg bg-gray-100 p-2 transition-all duration-300 hover:bg-gray-200 hover:text-gray-900">
						  <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 24 24" stroke-width="1.6" stroke="#111827" class="size-4">
							<path stroke-linecap="round" stroke-linejoin="round" d="M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3" />
						  </svg>
						</button>
						<button (click)="deleteFile(file.fileUuid, file.name)" class="rounded-lg bg-gray-100 p-2 transition-all duration-300 hover:bg-gray-200 hover:text-gray-900">
						  <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none" class="size-4">
							<path d="M4 4L12 12M12 4L4 12" stroke="#111827" stroke-width="1.6" stroke-linejoin="round" stroke-linecap="round"></path>
						  </svg>
						</button>
					  </div>
					</div>
					}
				} @else {
					<p class="flex flex-row items-center justify-center mb-3">
						No attachments found
					</p>
				}
			  </div>
			</div>
			<div class="rounded-xl p-4 bg-white border border-solid border-gray-200">
			  <div class="flex items-center justify-between pb-4 border-b border-solid border-gray-200">
				<h5 class="text-base font-semibold text-gray-900">
				  Tasks ({{tasks?.length}})
				</h5>
				@if ((profile.role === 'MANAGER' || profile.role === 'TECH_SUPPORT' || profile.role === 'SUPER_ADMIN' || profile.role === 'ADMIN')) {
					<button [disabled]="!(profile.role === 'MANAGER' || profile.role === 'TECH_SUPPORT' || profile.role === 'SUPER_ADMIN' || profile.role === 'ADMIN')" (click)="openModal(taskmodal)" class="disabled:bg-gray-300 flex items-center rounded-md bg-blue-600 hover:bg-blue-700 py-1.5 p-3 gap-1.5 text-xs font-medium text-white transition-all duration-300">
						Create
						<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-6">
						  <path stroke-linecap="round" stroke-linejoin="round" d="M12 9v6m3-3H9m12 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z" />
						</svg>
					  </button>
				}
			  </div>
			  <div class="mt-6 flex flex-col gap-4">
				@if (tasks?.length > 0) {
					@for (task of tasks; track task) {
						<div class="w-full">
						  <div class="flex items-center justify-between mb-2">
							<span [ngClass]="[
								task.status === 'COMPLETED' ? 'bg-green-600' : '',
								task.status === 'NEW' ? 'bg-yellow-400' : '',
								task.status === 'IN PROGRESS' ? 'bg-green-400' : '',
								task.status === 'IN REVIEW' ? 'bg-sky-500' : '',
								task.status === 'CLOSED' ? 'bg-red-700' : '',
								task.status === 'PENDING' ? 'bg-orange-400' : '',
								task.status === 'IMPEDED' ? 'bg-red-500' : '']"
							class="inline-flex items-center text-white text-xs font-medium pl-2 pr-2.5 rounded-full py-1">
								{{task.status}}
							</span>
							<div class="flex items-center gap-1">
								<p class="text-xs font-normal text-gray-500">
									Since {{task.createdAt | date: 'mediumDate'}}
								</p>
							  </div>
						  </div>
						  <div class="flex items-center justify-between">
							<div class="ml-2.5 pl-2.5 border-l-2 border-l-solid border-l-amber-600">
								<h6 class="text-base font-semibold text-gray-900 mb-0.5">
									{{task.name}}
								</h6>
								<p class="text-gray-500 text-xs font-normal mb-2.5">
									{{task.description}}
								</p>
								<div class="flex items-center justify-between">
								  <div class="flex items-center gap-1.5">
									<img [src]="task.imageUrl"
									  class="w-7 h-7 rounded-full" [alt]="task.firstName + ' ' + task.lastName" loading="lazy">
									<p class="text-xs font-medium text-gray-900">
										{{task.firstName}} {{task.lastName}}
									</p>
								  </div>
								</div>
							  </div>
							  @if ((profile.role === 'MANAGER' || profile.role === 'TECH_SUPPORT' || profile.role === 'SUPER_ADMIN' || profile.role === 'ADMIN')) {
								<div class="flex items-center gap-3">
								<button class="rounded-lg bg-gray-100 p-2 transition-all duration-300 hover:bg-gray-200 hover:text-gray-900">
									<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-4">
										<path stroke-linecap="round" stroke-linejoin="round" d="m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10" />
									  </svg>
								</button>
								<button class="rounded-lg bg-gray-100 p-2 transition-all duration-300 hover:bg-gray-200 hover:text-gray-900">
								  <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none" class="size-4">
									<path d="M4 4L12 12M12 4L4 12" stroke="#111827" stroke-width="1.6" stroke-linejoin="round" stroke-linecap="round"></path>
								  </svg>
								</button>
							  </div>
							}
						  </div>
						</div>
					}
				} @else {
					<p class="flex flex-row items-center justify-center mb-3">
						No tasks found
					</p>
				}
			  </div>
			</div>
		  </div>
		</div>
	  </div>
	</div>
	}
	@if (!store?.ticketDetail()) {
	<div class="container mx-auto ">
	  <div class="grid grid-cols-1 xl:grid-cols-3 lg:grid-cols-3 gap-4">
		<main class="xl:col-span-2 lg:col-span-2 w-full">
		  <div role="status" class="animate-pulse bg-white mt-5 rounded-lg p-2 border border-solid border-gray-200">
			<div class="h-3 bg-gray-200 rounded-full w-full mb-3"></div>
			<div class="h-3 bg-gray-200 rounded-full w-full mb-3"></div>
			<div class="h-3 bg-gray-200 rounded-full w-full mb-3"></div>
			<div class="h-3 bg-gray-200 rounded-full w-full mb-3"></div>
			<div class="h-3 bg-gray-200 rounded-full w-full mb-3"></div>
			<div class="h-3 bg-gray-200 rounded-full w-full mb-3"></div>
			<div class="h-3 bg-gray-200 rounded-full w-full mb-3"></div>
			<div class="h-3 bg-gray-200 rounded-full w-full mb-3"></div>
			<div class="h-3 bg-gray-200 rounded-full w-full mb-3"></div>
			<div class="h-3 bg-gray-200 rounded-full w-full mb-3"></div>
			<div class="h-3 bg-gray-200 rounded-full w-full mb-3"></div>
			<div class="h-3 bg-gray-200 rounded-full w-full mb-3"></div>
			<div class="h-3 bg-gray-200 rounded-full w-full mb-3"></div>
			<div class="h-3 bg-gray-200 rounded-full w-full mb-3"></div>
			<div class="h-3 bg-gray-200 rounded-full w-full mb-3"></div>
			<div class="h-3 bg-gray-200 rounded-full w-full mb-3"></div>
			<div class="h-3 bg-gray-200 rounded-full w-full mb-3"></div>
			<div class="h-3 bg-gray-200 rounded-full w-full mb-3"></div>
			<div class="h-3 bg-gray-200 rounded-full w-full mb-3"></div>
			<div class="h-3 bg-gray-200 rounded-full w-full mb-3"></div>
			<div class="h-3 bg-gray-200 rounded-full w-full mb-3"></div>
			<div class="h-3 bg-gray-200 rounded-full w-full mb-3"></div>
			<div class="h-3 bg-gray-200 rounded-full w-full mb-3"></div>
			<div class="h-3 bg-gray-200 rounded-full w-full mb-3"></div>
			<div class="h-3 bg-gray-200 rounded-full w-full mb-3"></div>
			<div class="h-3 bg-gray-200 rounded-full w-full mb-3"></div>
			<div class="h-3 bg-gray-200 rounded-full w-full mb-3"></div>
			<div class="h-3 bg-gray-200 rounded-full w-full mb-3"></div>
			<div class="h-3 bg-gray-200 rounded-full w-full mb-3"></div>
			<div class="h-3 bg-gray-200 rounded-full w-full mb-3"></div>
			<div class="h-3 bg-gray-200 rounded-full w-full mb-3"></div>
			<div class="h-3 bg-gray-200 rounded-full w-full mb-3"></div>
			<div class="h-3 bg-gray-200 rounded-full w-full"></div>
			<span class="sr-only">Loading...</span>
		  </div>
		</main>
		<div class="rounded-xl h-fit mt-5">
		  <div role="status" class="animate-pulse bg-white rounded-lg p-2 border border-solid border-gray-200">
			<div class="h-3 bg-gray-200 rounded-full w-full mb-3"></div>
			<div class="h-3 bg-gray-200 rounded-full w-full mb-3"></div>
			<div class="h-3 bg-gray-200 rounded-full w-full mb-3"></div>
			<div class="h-3 bg-gray-200 rounded-full w-full mb-3"></div>
			<div class="h-3 bg-gray-200 rounded-full w-full mb-3"></div>
			<div class="h-3 bg-gray-200 rounded-full w-full mb-3"></div>
			<div class="h-3 bg-gray-200 rounded-full w-full mb-3"></div>
			<div class="h-3 bg-gray-200 rounded-full w-full mb-3"></div>
			<div class="h-3 bg-gray-200 rounded-full w-full mb-3"></div>
			<div class="h-3 bg-gray-200 rounded-full w-full mb-3"></div>
			<div class="h-3 bg-gray-200 rounded-full w-full mb-3"></div>
			<div class="h-3 bg-gray-200 rounded-full w-full mb-3"></div>
			<div class="h-3 bg-gray-200 rounded-full w-full"></div>
			<span class="sr-only">Loading...</span>
		  </div>
		</div>
	  </div>
	</div>
	}
<ng-template #taskmodal>
	<div id="taskmodal" class="justify-center items-center">
		<div class="relative w-full max-w-2xl max-h-full">
		   <div class="relative bg-white rounded-lg">
			  <div class="flex items-center justify-between p-4 md:p-5 border-b rounded-t">
				 <h3 class="text-xl font-semibold text-gray-900">
					Create Task
				 </h3>
				 <button (click)="closeModal()" type="button" class="bg-gray-100 text-gray-600 hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 ms-auto inline-flex justify-center items-center">
					<svg class="w-3 h-3" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 14 14">
					   <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"/>
					</svg>
				 </button>
			  </div>
			  <div class="p-4 md:p-5 space-y-4">
				 <form #taskForm="ngForm" (ngSubmit)="createTask(taskForm)">
					<input type="hidden" [ngModel]="store?.ticketDetail()?.ticket?.ticketUuid" name="ticketUuid" required />
					<div class="mb-6">
					   <label for="title" class="block mb-2 text-sm font-medium text-gray-900">Name</label>
					   <input type="text" ngModel name="name" class="border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5" placeholder="Example: Finish creating customer report" required />
					</div>
					<div class="mb-6">
					   <label for="description" class="block mb-2 text-sm font-medium text-gray-900">Description</label>
					   <textarea ngModel name="description" id="description" placeholder="Example: I need to finish creating customer sales report by Tuesday and send it to customer" cols="" rows=""
						  class="p-2 text-sm font-normal shadow-xs text-gray-900 placeholder-gray-400 rounded-lg border border-gray-300 w-full h-20"
						  required></textarea>
					</div>
					<div class="mb-6">
						  <label for="type" class="block mb-2 text-sm font-medium text-gray-900">Status</label>
						  <select name="status" ngModel required class="w-full rounded-md border-0 ml-0 px-2 py-2 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-inset focus:ring-indigo-full0 sm:text-sm sm:leading-6">
							@for (status of ['NEW', 'IN PROGRESS', 'COMPLETED', 'IN REVIEW', 'CLOSED', 'PENDING', 'IMPEDED']; track status) {
							  <option 
							  [selected]="status === 'NEW'"
							  [value]="status">{{status}}</option>
							  }
						  </select>
					</div>
					   <div class="flex items-center justify-end gap-3 mt-3 border-t border-gray-200">
						  <button type="submit" [disabled]="taskForm.invalid" data-modal-hide="taskmodal" class="disabled:bg-gray-300 text-white bg-blue-600 hover:bg-blue-700 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm p-2 mt-3">
						  Create Task
						  </button>
					   </div>
				 </form>
			  </div>
		   </div>
		</div>
	 </div>
</ng-template>
<input type="file" #filesInput (change)="uploadFiles($event.target.files)" name="file" accept="*/*" multiple class="hidden" />